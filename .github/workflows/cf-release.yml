name: CF Release (staging â†’ production)
on:
  workflow_dispatch:
    inputs:
      branch:
        description: Branch
        required: true
        default: main
jobs:
  stage:
    uses: ./.github/workflows/pages-deploy.yml
    with:
      environment: staging
      branch: ${{ inputs.branch }}
    secrets:
      CF_API_TOKEN: ${{ secrets.CF_API_TOKEN }}
      CF_ACCOUNT_ID: ${{ secrets.CF_ACCOUNT_ID }}
  prod:
    needs: stage
    uses: ./.github/workflows/pages-deploy.yml
    with:
      environment: production
      branch: ${{ inputs.branch }}
    secrets:
      CF_API_TOKEN: ${{ secrets.CF_API_TOKEN }}
      CF_ACCOUNT_ID: ${{ secrets.CF_ACCOUNT_ID }}
